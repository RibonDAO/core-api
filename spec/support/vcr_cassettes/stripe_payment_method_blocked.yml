---
http_interactions:
- request:
    method: get
    uri: https://owlracle.info/poly/gas
    body:
      encoding: US-ASCII
      string: ''
    headers:
      Accept-Encoding:
      - gzip;q=1.0,deflate;q=0.6,identity;q=0.3
      Accept:
      - "*/*"
      User-Agent:
      - Ruby
  response:
    status:
      code: 302
      message: Found
    headers:
      Date:
      - Fri, 29 Sep 2023 12:58:43 GMT
      Content-Type:
      - text/plain; charset=utf-8
      Content-Length:
      - '60'
      Connection:
      - keep-alive
      X-Powered-By:
      - Express
      Location:
      - https://api.owlracle.info/v2/poly/gas?
      Vary:
      - Accept
      Cf-Cache-Status:
      - DYNAMIC
      Report-To:
      - '{"endpoints":[{"url":"https:\/\/a.nel.cloudflare.com\/report\/v3?s=SlvN1foO1FYr6Dqik85TIg2NsQlu70Ub7d36wLpYUYT7ycV9YeUimdiJey7G0Hzh5Kz5veCXmrLplMVcBdTGG9ozcuSrtR54MFCRlZ6txNq1sf40ibuxz%2FnEbrK%2FPRLH"}],"group":"cf-nel","max_age":604800}'
      Nel:
      - '{"success_fraction":0,"report_to":"cf-nel","max_age":604800}'
      Server:
      - cloudflare
      Cf-Ray:
      - 80e466309f9b258c-GIG
      Alt-Svc:
      - h3=":443"; ma=86400
    body:
      encoding: UTF-8
      string: Found. Redirecting to https://api.owlracle.info/v2/poly/gas?
  recorded_at: Fri, 29 Sep 2023 12:58:42 GMT
- request:
    method: get
    uri: https://api.owlracle.info/v2/poly/gas
    body:
      encoding: US-ASCII
      string: ''
    headers:
      Accept-Encoding:
      - gzip;q=1.0,deflate;q=0.6,identity;q=0.3
      Accept:
      - "*/*"
      User-Agent:
      - Ruby
  response:
    status:
      code: 400
      message: Bad Request
    headers:
      Date:
      - Fri, 29 Sep 2023 12:58:43 GMT
      Content-Type:
      - application/json; charset=utf-8
      Content-Length:
      - '73'
      Connection:
      - keep-alive
      X-Powered-By:
      - Express
      Access-Control-Allow-Origin:
      - "*"
      Etag:
      - W/"49-Ygzk9LBrkZvIffTMFEI+u/Bm05s"
      Cf-Cache-Status:
      - DYNAMIC
      Report-To:
      - '{"endpoints":[{"url":"https:\/\/a.nel.cloudflare.com\/report\/v3?s=UNFeFJX%2ByM6t2L0ZEJxUmdkGV72rUx3tfgGu06iwAmbWB3%2FG%2FUxjtU4HT2nSonPTcbWTGM01%2BF344602Ihav7vcz0LcTwTyU5QbAQKWZ6C4gJYg3Ksd2fKOCULSz%2FfIZJQJ3JA%3D%3D"}],"group":"cf-nel","max_age":604800}'
      Nel:
      - '{"success_fraction":0,"report_to":"cf-nel","max_age":604800}'
      Server:
      - cloudflare
      Cf-Ray:
      - 80e466338e6626a1-GIG
      Alt-Svc:
      - h3=":443"; ma=86400
    body:
      encoding: UTF-8
      string: '{"error":{"status":400,"type":"Bad Request","message":"Missing API
        key"}}'
  recorded_at: Fri, 29 Sep 2023 12:58:43 GMT
- request:
    method: get
    uri: https://api.currencyapi.com/v3/latest?base_currency=BRL&currencies=USD
    body:
      encoding: US-ASCII
      string: ''
    headers:
      Apikey:
      - CURRENCY_API_KEY
      Accept-Encoding:
      - gzip;q=1.0,deflate;q=0.6,identity;q=0.3
      Accept:
      - "*/*"
      User-Agent:
      - Ruby
  response:
    status:
      code: 200
      message: OK
    headers:
      Date:
      - Mon, 11 Mar 2024 14:56:50 GMT
      Content-Type:
      - application/json; charset=UTF-8
      Transfer-Encoding:
      - chunked
      Connection:
      - keep-alive
      Charset:
      - utf-8
      X-Execution-Time:
      - '15.14'
      X-Cost:
      - '1'
      Cache-Control:
      - no-cache, private
      X-Ratelimit-Limit-Quota-Month:
      - '300'
      X-Ratelimit-Remaining-Quota-Month:
      - '292'
      X-Forwarded-Proto:
      - https
      X-Forwarded-Port:
      - '443'
      X-Request-Id:
      - 0e8fb0e4-6cfe-4c53-ac8d-870048a1f47e
      Access-Control-Allow-Origin:
      - "*"
      X-Ratelimit-Limit-Quota-Minute:
      - '10'
      X-Ratelimit-Remaining-Quota-Minute:
      - '9'
      Cf-Cache-Status:
      - DYNAMIC
      Report-To:
      - '{"endpoints":[{"url":"https:\/\/a.nel.cloudflare.com\/report\/v3?s=BKO8uXTKKiNCiXs%2FImuKeDfqO25zGjplQANGi4ge4KyV5okqUKcnXAy9sA5DwiFD3l9X2r9I%2BgkQAuOL0%2B7pxF0DZwK9FW2OZPYq8qi2GmfCSIPAS4CT%2BlvYio4miXzXw0ajAvbU"}],"group":"cf-nel","max_age":604800}'
      Nel:
      - '{"success_fraction":0,"report_to":"cf-nel","max_age":604800}'
      Server:
      - cloudflare
      Cf-Ray:
      - 862c64bb583e7a2c-GIG
      Alt-Svc:
      - h3=":443"; ma=86400
    body:
      encoding: UTF-8
      string: '{"meta":{"last_updated_at":"2024-03-10T23:59:59Z"},"data":{"USD":{"code":"USD","value":0.1843}}}'
  recorded_at: Mon, 11 Mar 2024 14:56:50 GMT
- request:
    method: post
    uri: https://api.stripe.com/v1/payment_methods
    body:
      encoding: UTF-8
      string: type=card&card[number]=4100000000000019&card[exp_month]=12&card[exp_year]=24&card[cvc]=123
    headers:
      User-Agent:
      - Stripe/v1 RubyBindings/7.1.0
      Authorization:
      - Bearer STRIPE_SECRET_KEY
      Content-Type:
      - application/x-www-form-urlencoded
      X-Stripe-Client-Telemetry:
      - '{"last_request_metrics":{"request_id":"req_zrgSE1slE2EGm1","request_duration_ms":0}}'
      X-Stripe-Client-User-Agent:
      - '{"bindings_version":"7.1.0","lang":"ruby","lang_version":"3.1.2 p20 (2022-04-12)","platform":"arm64-darwin22","engine":"ruby","publisher":"stripe","uname":"Darwin
        MacBook-Pro-de-Thais.local 22.6.0 Darwin Kernel Version 22.6.0: Wed Jul  5
        22:22:05 PDT 2023; root:xnu-8796.141.3~6/RELEASE_ARM64_T6000 arm64","hostname":"MacBook-Pro-de-Thais.local"}'
      Accept-Encoding:
      - gzip;q=1.0,deflate;q=0.6,identity;q=0.3
      Accept:
      - "*/*"
  response:
    status:
      code: 200
      message: OK
    headers:
      Server:
      - nginx
      Date:
      - Fri, 29 Sep 2023 12:58:44 GMT
      Content-Type:
      - application/json
      Content-Length:
      - '931'
      Connection:
      - keep-alive
      Access-Control-Allow-Credentials:
      - 'true'
      Access-Control-Allow-Methods:
      - GET,HEAD,PUT,PATCH,POST,DELETE
      Access-Control-Allow-Origin:
      - "*"
      Access-Control-Expose-Headers:
      - Request-Id, Stripe-Manage-Version, X-Stripe-External-Auth-Required, X-Stripe-Privileged-Session-Required
      Access-Control-Max-Age:
      - '300'
      Cache-Control:
      - no-cache, no-store
      Idempotency-Key:
      - 56be10b5-ae89-4f37-ae72-1e4c619e7061
      Original-Request:
      - req_bkxDp460stC1ER
      Request-Id:
      - req_bkxDp460stC1ER
      Stripe-Should-Retry:
      - 'false'
      Stripe-Version:
      - '2020-08-27'
      Vary:
      - Origin
      X-Stripe-Routing-Context-Priority-Tier:
      - api-testmode
      Strict-Transport-Security:
      - max-age=63072000; includeSubDomains; preload
    body:
      encoding: UTF-8
      string: |-
        {
          "id": "pm_1NvgHHJuOnwQq9QxUdnVrulB",
          "object": "payment_method",
          "billing_details": {
            "address": {
              "city": null,
              "country": null,
              "line1": null,
              "line2": null,
              "postal_code": null,
              "state": null
            },
            "email": null,
            "name": null,
            "phone": null
          },
          "card": {
            "brand": "visa",
            "checks": {
              "address_line1_check": null,
              "address_postal_code_check": null,
              "cvc_check": "unchecked"
            },
            "country": "US",
            "exp_month": 12,
            "exp_year": 2024,
            "fingerprint": "kVIu3rHKofLj64wR",
            "funding": "credit",
            "generated_from": null,
            "last4": "0019",
            "networks": {
              "available": [
                "visa"
              ],
              "preferred": null
            },
            "three_d_secure_usage": {
              "supported": true
            },
            "wallet": null
          },
          "created": 1695992324,
          "customer": null,
          "livemode": false,
          "metadata": {},
          "type": "card"
        }
  recorded_at: Fri, 29 Sep 2023 12:58:44 GMT
- request:
    method: post
    uri: https://api.stripe.com/v1/customers
    body:
      encoding: UTF-8
      string: email=customer117%40customer.com&name=a+customer&payment_method=pm_1NvgHHJuOnwQq9QxUdnVrulB&invoice_settings[default_payment_method]=pm_1NvgHHJuOnwQq9QxUdnVrulB&address[country]=BR&address[city]=Bras%C3%ADlia&address[state]=DF
    headers:
      User-Agent:
      - Stripe/v1 RubyBindings/7.1.0
      Authorization:
      - Bearer STRIPE_SECRET_KEY
      Content-Type:
      - application/x-www-form-urlencoded
      X-Stripe-Client-Telemetry:
      - '{"last_request_metrics":{"request_id":"req_bkxDp460stC1ER","request_duration_ms":895}}'
      X-Stripe-Client-User-Agent:
      - '{"bindings_version":"7.1.0","lang":"ruby","lang_version":"3.1.2 p20 (2022-04-12)","platform":"arm64-darwin22","engine":"ruby","publisher":"stripe","uname":"Darwin
        MacBook-Pro-de-Thais.local 22.6.0 Darwin Kernel Version 22.6.0: Wed Jul  5
        22:22:05 PDT 2023; root:xnu-8796.141.3~6/RELEASE_ARM64_T6000 arm64","hostname":"MacBook-Pro-de-Thais.local"}'
      Accept-Encoding:
      - gzip;q=1.0,deflate;q=0.6,identity;q=0.3
      Accept:
      - "*/*"
  response:
    status:
      code: 200
      message: OK
    headers:
      Server:
      - nginx
      Date:
      - Fri, 29 Sep 2023 12:58:45 GMT
      Content-Type:
      - application/json
      Content-Length:
      - '825'
      Connection:
      - keep-alive
      Access-Control-Allow-Credentials:
      - 'true'
      Access-Control-Allow-Methods:
      - GET,HEAD,PUT,PATCH,POST,DELETE
      Access-Control-Allow-Origin:
      - "*"
      Access-Control-Expose-Headers:
      - Request-Id, Stripe-Manage-Version, X-Stripe-External-Auth-Required, X-Stripe-Privileged-Session-Required
      Access-Control-Max-Age:
      - '300'
      Cache-Control:
      - no-cache, no-store
      Idempotency-Key:
      - c702930c-b94b-4496-8437-2ae637f653c9
      Original-Request:
      - req_bApN2rHkpStzix
      Request-Id:
      - req_bApN2rHkpStzix
      Stripe-Should-Retry:
      - 'false'
      Stripe-Version:
      - '2020-08-27'
      Vary:
      - Origin
      X-Stripe-Routing-Context-Priority-Tier:
      - api-testmode
      Strict-Transport-Security:
      - max-age=63072000; includeSubDomains; preload
    body:
      encoding: UTF-8
      string: |-
        {
          "id": "cus_Oj8Y29LPO4TzT8",
          "object": "customer",
          "address": {
            "city": "Brasília",
            "country": "BR",
            "line1": null,
            "line2": null,
            "postal_code": null,
            "state": "DF"
          },
          "balance": 0,
          "created": 1695992324,
          "currency": null,
          "default_currency": null,
          "default_source": null,
          "delinquent": false,
          "description": null,
          "discount": null,
          "email": "customer117@customer.com",
          "invoice_prefix": "A47AE660",
          "invoice_settings": {
            "custom_fields": null,
            "default_payment_method": "pm_1NvgHHJuOnwQq9QxUdnVrulB",
            "footer": null,
            "rendering_options": null
          },
          "livemode": false,
          "metadata": {},
          "name": "a customer",
          "next_invoice_sequence": 1,
          "phone": null,
          "preferred_locales": [],
          "shipping": null,
          "tax_exempt": "none",
          "test_clock": null
        }
  recorded_at: Fri, 29 Sep 2023 12:58:44 GMT
- request:
    method: post
    uri: https://api.stripe.com/v1/customers/cus_Oj8Y29LPO4TzT8/tax_ids
    body:
      encoding: UTF-8
      string: type=br_cpf&value=12345678901
    headers:
      User-Agent:
      - Stripe/v1 RubyBindings/7.1.0
      Authorization:
      - Bearer STRIPE_SECRET_KEY
      Content-Type:
      - application/x-www-form-urlencoded
      X-Stripe-Client-Telemetry:
      - '{"last_request_metrics":{"request_id":"req_bApN2rHkpStzix","request_duration_ms":779}}'
      X-Stripe-Client-User-Agent:
      - '{"bindings_version":"7.1.0","lang":"ruby","lang_version":"3.1.2 p20 (2022-04-12)","platform":"arm64-darwin22","engine":"ruby","publisher":"stripe","uname":"Darwin
        MacBook-Pro-de-Thais.local 22.6.0 Darwin Kernel Version 22.6.0: Wed Jul  5
        22:22:05 PDT 2023; root:xnu-8796.141.3~6/RELEASE_ARM64_T6000 arm64","hostname":"MacBook-Pro-de-Thais.local"}'
      Accept-Encoding:
      - gzip;q=1.0,deflate;q=0.6,identity;q=0.3
      Accept:
      - "*/*"
  response:
    status:
      code: 200
      message: OK
    headers:
      Server:
      - nginx
      Date:
      - Fri, 29 Sep 2023 12:58:45 GMT
      Content-Type:
      - application/json
      Content-Length:
      - '324'
      Connection:
      - keep-alive
      Access-Control-Allow-Credentials:
      - 'true'
      Access-Control-Allow-Methods:
      - GET,HEAD,PUT,PATCH,POST,DELETE
      Access-Control-Allow-Origin:
      - "*"
      Access-Control-Expose-Headers:
      - Request-Id, Stripe-Manage-Version, X-Stripe-External-Auth-Required, X-Stripe-Privileged-Session-Required
      Access-Control-Max-Age:
      - '300'
      Cache-Control:
      - no-cache, no-store
      Idempotency-Key:
      - a8bf34f2-8935-46d8-b759-b02a7c0d2d40
      Original-Request:
      - req_zfRyXLii7cPydF
      Request-Id:
      - req_zfRyXLii7cPydF
      Stripe-Should-Retry:
      - 'false'
      Stripe-Version:
      - '2020-08-27'
      Vary:
      - Origin
      X-Stripe-Routing-Context-Priority-Tier:
      - api-testmode
      Strict-Transport-Security:
      - max-age=63072000; includeSubDomains; preload
    body:
      encoding: UTF-8
      string: |-
        {
          "id": "txi_1NvgHJJuOnwQq9Qx6mcHHBB6",
          "object": "tax_id",
          "country": "BR",
          "created": 1695992325,
          "customer": "cus_Oj8Y29LPO4TzT8",
          "livemode": false,
          "type": "br_cpf",
          "value": "123.456.789-01",
          "verification": {
            "status": "unavailable",
            "verified_address": null,
            "verified_name": null
          }
        }
  recorded_at: Fri, 29 Sep 2023 12:58:45 GMT
- request:
    method: post
    uri: https://api.stripe.com/v1/payment_intents
    body:
      encoding: UTF-8
      string: amount=1000&currency=brl&payment_method=pm_1NvgHHJuOnwQq9QxUdnVrulB&customer=cus_Oj8Y29LPO4TzT8&confirm=true
    headers:
      User-Agent:
      - Stripe/v1 RubyBindings/7.1.0
      Authorization:
      - Bearer STRIPE_SECRET_KEY
      Content-Type:
      - application/x-www-form-urlencoded
      X-Stripe-Client-Telemetry:
      - '{"last_request_metrics":{"request_id":"req_zfRyXLii7cPydF","request_duration_ms":375}}'
      X-Stripe-Client-User-Agent:
      - '{"bindings_version":"7.1.0","lang":"ruby","lang_version":"3.1.2 p20 (2022-04-12)","platform":"arm64-darwin22","engine":"ruby","publisher":"stripe","uname":"Darwin
        MacBook-Pro-de-Thais.local 22.6.0 Darwin Kernel Version 22.6.0: Wed Jul  5
        22:22:05 PDT 2023; root:xnu-8796.141.3~6/RELEASE_ARM64_T6000 arm64","hostname":"MacBook-Pro-de-Thais.local"}'
      Accept-Encoding:
      - gzip;q=1.0,deflate;q=0.6,identity;q=0.3
      Accept:
      - "*/*"
  response:
    status:
      code: 402
      message: Payment Required
    headers:
      Server:
      - nginx
      Date:
      - Fri, 29 Sep 2023 12:58:46 GMT
      Content-Type:
      - application/json
      Content-Length:
      - '8898'
      Connection:
      - keep-alive
      Access-Control-Allow-Credentials:
      - 'true'
      Access-Control-Allow-Methods:
      - GET,HEAD,PUT,PATCH,POST,DELETE
      Access-Control-Allow-Origin:
      - "*"
      Access-Control-Expose-Headers:
      - Request-Id, Stripe-Manage-Version, X-Stripe-External-Auth-Required, X-Stripe-Privileged-Session-Required
      Access-Control-Max-Age:
      - '300'
      Cache-Control:
      - no-cache, no-store
      Idempotency-Key:
      - 78459956-e2c5-42e6-b670-371fa88b0428
      Original-Request:
      - req_ZzuMJwcy1Fhalr
      Request-Id:
      - req_ZzuMJwcy1Fhalr
      Stripe-Should-Retry:
      - 'false'
      Stripe-Version:
      - '2020-08-27'
      Vary:
      - Origin
      X-Stripe-Routing-Context-Priority-Tier:
      - api-testmode
      Strict-Transport-Security:
      - max-age=63072000; includeSubDomains; preload
    body:
      encoding: UTF-8
      string: |
        {
          "error": {
            "charge": "ch_3NvgHJJuOnwQq9Qx1waXnLat",
            "code": "card_declined",
            "decline_code": "fraudulent",
            "doc_url": "https://stripe.com/docs/error-codes/card-declined",
            "message": "Your card was declined.",
            "payment_intent": {
              "id": "pi_3NvgHJJuOnwQq9Qx1NiwLdAk",
              "object": "payment_intent",
              "amount": 1000,
              "amount_capturable": 0,
              "amount_details": {
                "tip": {
                }
              },
              "amount_received": 0,
              "application": null,
              "application_fee_amount": null,
              "automatic_payment_methods": null,
              "canceled_at": null,
              "cancellation_reason": null,
              "capture_method": "automatic",
              "charges": {
                "object": "list",
                "data": [
                  {
                    "id": "ch_3NvgHJJuOnwQq9Qx1waXnLat",
                    "object": "charge",
                    "amount": 1000,
                    "amount_captured": 0,
                    "amount_refunded": 0,
                    "application": null,
                    "application_fee": null,
                    "application_fee_amount": null,
                    "balance_transaction": null,
                    "billing_details": {
                      "address": {
                        "city": null,
                        "country": null,
                        "line1": null,
                        "line2": null,
                        "postal_code": null,
                        "state": null
                      },
                      "email": null,
                      "name": null,
                      "phone": null
                    },
                    "calculated_statement_descriptor": null,
                    "captured": false,
                    "created": 1695992325,
                    "currency": "brl",
                    "customer": "cus_Oj8Y29LPO4TzT8",
                    "description": null,
                    "destination": null,
                    "dispute": null,
                    "disputed": false,
                    "failure_balance_transaction": null,
                    "failure_code": "card_declined",
                    "failure_message": "Your card was declined.",
                    "fraud_details": {
                      "stripe_report": "fraudulent"
                    },
                    "invoice": null,
                    "livemode": false,
                    "metadata": {
                    },
                    "on_behalf_of": null,
                    "order": null,
                    "outcome": {
                      "network_status": "not_sent_to_network",
                      "reason": "merchant_blacklist",
                      "risk_level": "highest",
                      "risk_score": 87,
                      "seller_message": "Stripe blocked this payment.",
                      "type": "blocked"
                    },
                    "paid": false,
                    "payment_intent": "pi_3NvgHJJuOnwQq9Qx1NiwLdAk",
                    "payment_method": "pm_1NvgHHJuOnwQq9QxUdnVrulB",
                    "payment_method_details": {
                      "card": {
                        "amount_authorized": null,
                        "brand": "visa",
                        "checks": {
                          "address_line1_check": null,
                          "address_postal_code_check": null,
                          "cvc_check": "unavailable"
                        },
                        "country": "US",
                        "exp_month": 12,
                        "exp_year": 2024,
                        "extended_authorization": {
                          "status": "disabled"
                        },
                        "fingerprint": "kVIu3rHKofLj64wR",
                        "funding": "credit",
                        "incremental_authorization": {
                          "status": "unavailable"
                        },
                        "installments": null,
                        "last4": "0019",
                        "mandate": null,
                        "multicapture": {
                          "status": "unavailable"
                        },
                        "network": "visa",
                        "network_token": {
                          "used": false
                        },
                        "overcapture": {
                          "maximum_amount_capturable": 1000,
                          "status": "unavailable"
                        },
                        "three_d_secure": null,
                        "wallet": null
                      },
                      "type": "card"
                    },
                    "receipt_email": null,
                    "receipt_number": null,
                    "receipt_url": null,
                    "refunded": false,
                    "refunds": {
                      "object": "list",
                      "data": [

                      ],
                      "has_more": false,
                      "total_count": 0,
                      "url": "/v1/charges/ch_3NvgHJJuOnwQq9Qx1waXnLat/refunds"
                    },
                    "review": null,
                    "shipping": null,
                    "source": null,
                    "source_transfer": null,
                    "statement_descriptor": null,
                    "statement_descriptor_suffix": null,
                    "status": "failed",
                    "transfer_data": null,
                    "transfer_group": null
                  }
                ],
                "has_more": false,
                "total_count": 1,
                "url": "/v1/charges?payment_intent=pi_3NvgHJJuOnwQq9Qx1NiwLdAk"
              },
              "client_secret": "pi_3NvgHJJuOnwQq9Qx1NiwLdAk_secret_niMd3XrPZbXTvoLDZ52aqIREn",
              "confirmation_method": "automatic",
              "created": 1695992325,
              "currency": "brl",
              "customer": "cus_Oj8Y29LPO4TzT8",
              "description": null,
              "invoice": null,
              "last_payment_error": {
                "charge": "ch_3NvgHJJuOnwQq9Qx1waXnLat",
                "code": "card_declined",
                "decline_code": "fraudulent",
                "doc_url": "https://stripe.com/docs/error-codes/card-declined",
                "message": "Your card was declined.",
                "payment_method": {
                  "id": "pm_1NvgHHJuOnwQq9QxUdnVrulB",
                  "object": "payment_method",
                  "billing_details": {
                    "address": {
                      "city": null,
                      "country": null,
                      "line1": null,
                      "line2": null,
                      "postal_code": null,
                      "state": null
                    },
                    "email": null,
                    "name": null,
                    "phone": null
                  },
                  "card": {
                    "brand": "visa",
                    "checks": {
                      "address_line1_check": null,
                      "address_postal_code_check": null,
                      "cvc_check": "pass"
                    },
                    "country": "US",
                    "exp_month": 12,
                    "exp_year": 2024,
                    "fingerprint": "kVIu3rHKofLj64wR",
                    "funding": "credit",
                    "generated_from": null,
                    "last4": "0019",
                    "networks": {
                      "available": [
                        "visa"
                      ],
                      "preferred": null
                    },
                    "three_d_secure_usage": {
                      "supported": true
                    },
                    "wallet": null
                  },
                  "created": 1695992324,
                  "customer": "cus_Oj8Y29LPO4TzT8",
                  "livemode": false,
                  "metadata": {
                  },
                  "type": "card"
                },
                "type": "card_error"
              },
              "latest_charge": "ch_3NvgHJJuOnwQq9Qx1waXnLat",
              "livemode": false,
              "metadata": {
              },
              "next_action": null,
              "on_behalf_of": null,
              "payment_method": null,
              "payment_method_configuration_details": null,
              "payment_method_options": {
                "card": {
                  "installments": null,
                  "mandate_options": null,
                  "network": null,
                  "request_three_d_secure": "automatic"
                }
              },
              "payment_method_types": [
                "card"
              ],
              "processing": null,
              "receipt_email": null,
              "review": null,
              "setup_future_usage": null,
              "shipping": null,
              "source": null,
              "statement_descriptor": null,
              "statement_descriptor_suffix": null,
              "status": "requires_payment_method",
              "transfer_data": null,
              "transfer_group": null
            },
            "payment_method": {
              "id": "pm_1NvgHHJuOnwQq9QxUdnVrulB",
              "object": "payment_method",
              "billing_details": {
                "address": {
                  "city": null,
                  "country": null,
                  "line1": null,
                  "line2": null,
                  "postal_code": null,
                  "state": null
                },
                "email": null,
                "name": null,
                "phone": null
              },
              "card": {
                "brand": "visa",
                "checks": {
                  "address_line1_check": null,
                  "address_postal_code_check": null,
                  "cvc_check": "pass"
                },
                "country": "US",
                "exp_month": 12,
                "exp_year": 2024,
                "fingerprint": "kVIu3rHKofLj64wR",
                "funding": "credit",
                "generated_from": null,
                "last4": "0019",
                "networks": {
                  "available": [
                    "visa"
                  ],
                  "preferred": null
                },
                "three_d_secure_usage": {
                  "supported": true
                },
                "wallet": null
              },
              "created": 1695992324,
              "customer": "cus_Oj8Y29LPO4TzT8",
              "livemode": false,
              "metadata": {
              },
              "type": "card"
            },
            "request_log_url": "https://dashboard.stripe.com/test/logs/req_ZzuMJwcy1Fhalr?t=1695992325",
            "type": "card_error"
          }
        }
  recorded_at: Fri, 29 Sep 2023 12:58:46 GMT
- request:
    method: get
    uri: https://api.stripe.com/v1/charges/ch_3NvgHJJuOnwQq9Qx1waXnLat
    body:
      encoding: US-ASCII
      string: ''
    headers:
      User-Agent:
      - Stripe/v1 RubyBindings/7.1.0
      Authorization:
      - Bearer STRIPE_SECRET_KEY
      Content-Type:
      - application/x-www-form-urlencoded
      X-Stripe-Client-Telemetry:
      - '{"last_request_metrics":{"request_id":"req_zfRyXLii7cPydF","request_duration_ms":375}}'
      X-Stripe-Client-User-Agent:
      - '{"bindings_version":"7.1.0","lang":"ruby","lang_version":"3.1.2 p20 (2022-04-12)","platform":"arm64-darwin22","engine":"ruby","publisher":"stripe","uname":"Darwin
        MacBook-Pro-de-Thais.local 22.6.0 Darwin Kernel Version 22.6.0: Wed Jul  5
        22:22:05 PDT 2023; root:xnu-8796.141.3~6/RELEASE_ARM64_T6000 arm64","hostname":"MacBook-Pro-de-Thais.local"}'
      Accept-Encoding:
      - gzip;q=1.0,deflate;q=0.6,identity;q=0.3
      Accept:
      - "*/*"
  response:
    status:
      code: 200
      message: OK
    headers:
      Server:
      - nginx
      Date:
      - Fri, 29 Sep 2023 12:58:47 GMT
      Content-Type:
      - application/json
      Content-Length:
      - '2768'
      Connection:
      - keep-alive
      Access-Control-Allow-Credentials:
      - 'true'
      Access-Control-Allow-Methods:
      - GET,HEAD,PUT,PATCH,POST,DELETE
      Access-Control-Allow-Origin:
      - "*"
      Access-Control-Expose-Headers:
      - Request-Id, Stripe-Manage-Version, X-Stripe-External-Auth-Required, X-Stripe-Privileged-Session-Required
      Access-Control-Max-Age:
      - '300'
      Cache-Control:
      - no-cache, no-store
      Request-Id:
      - req_K9QJYrj3ARFbrT
      Stripe-Version:
      - '2020-08-27'
      Vary:
      - Origin
      X-Stripe-Routing-Context-Priority-Tier:
      - api-testmode
      Strict-Transport-Security:
      - max-age=63072000; includeSubDomains; preload
    body:
      encoding: UTF-8
      string: |-
        {
          "id": "ch_3NvgHJJuOnwQq9Qx1waXnLat",
          "object": "charge",
          "amount": 1000,
          "amount_captured": 0,
          "amount_refunded": 0,
          "application": null,
          "application_fee": null,
          "application_fee_amount": null,
          "balance_transaction": null,
          "billing_details": {
            "address": {
              "city": null,
              "country": null,
              "line1": null,
              "line2": null,
              "postal_code": null,
              "state": null
            },
            "email": null,
            "name": null,
            "phone": null
          },
          "calculated_statement_descriptor": null,
          "captured": false,
          "created": 1695992325,
          "currency": "brl",
          "customer": "cus_Oj8Y29LPO4TzT8",
          "description": null,
          "destination": null,
          "dispute": null,
          "disputed": false,
          "failure_balance_transaction": null,
          "failure_code": "card_declined",
          "failure_message": "Your card was declined.",
          "fraud_details": {
            "stripe_report": "fraudulent"
          },
          "invoice": null,
          "livemode": false,
          "metadata": {},
          "on_behalf_of": null,
          "order": null,
          "outcome": {
            "network_status": "not_sent_to_network",
            "reason": "merchant_blacklist",
            "risk_level": "highest",
            "risk_score": 87,
            "seller_message": "Stripe blocked this payment.",
            "type": "blocked"
          },
          "paid": false,
          "payment_intent": "pi_3NvgHJJuOnwQq9Qx1NiwLdAk",
          "payment_method": "pm_1NvgHHJuOnwQq9QxUdnVrulB",
          "payment_method_details": {
            "card": {
              "amount_authorized": null,
              "brand": "visa",
              "checks": {
                "address_line1_check": null,
                "address_postal_code_check": null,
                "cvc_check": "unavailable"
              },
              "country": "US",
              "exp_month": 12,
              "exp_year": 2024,
              "extended_authorization": {
                "status": "disabled"
              },
              "fingerprint": "kVIu3rHKofLj64wR",
              "funding": "credit",
              "incremental_authorization": {
                "status": "unavailable"
              },
              "installments": null,
              "last4": "0019",
              "mandate": null,
              "multicapture": {
                "status": "unavailable"
              },
              "network": "visa",
              "network_token": {
                "used": false
              },
              "overcapture": {
                "maximum_amount_capturable": 1000,
                "status": "unavailable"
              },
              "three_d_secure": null,
              "wallet": null
            },
            "type": "card"
          },
          "receipt_email": null,
          "receipt_number": null,
          "receipt_url": null,
          "refunded": false,
          "refunds": {
            "object": "list",
            "data": [],
            "has_more": false,
            "total_count": 0,
            "url": "/v1/charges/ch_3NvgHJJuOnwQq9Qx1waXnLat/refunds"
          },
          "review": null,
          "shipping": null,
          "source": null,
          "source_transfer": null,
          "statement_descriptor": null,
          "statement_descriptor_suffix": null,
          "status": "failed",
          "transfer_data": null,
          "transfer_group": null
        }
  recorded_at: Fri, 29 Sep 2023 12:58:46 GMT
- request:
    method: post
    uri: https://api.stripe.com/v1/subscriptions
    body:
      encoding: UTF-8
      string: customer=cus_Oj8Y29LPO4TzT8&items[0][price]=price_1NVEIqJuOnwQq9QxBMaE2yul
    headers:
      User-Agent:
      - Stripe/v1 RubyBindings/7.1.0
      Authorization:
      - Bearer STRIPE_SECRET_KEY
      Content-Type:
      - application/x-www-form-urlencoded
      X-Stripe-Client-Telemetry:
      - '{"last_request_metrics":{"request_id":"req_zfRyXLii7cPydF","request_duration_ms":0}}'
      X-Stripe-Client-User-Agent:
      - '{"bindings_version":"7.1.0","lang":"ruby","lang_version":"3.1.2 p20 (2022-04-12)","platform":"arm64-darwin22","engine":"ruby","publisher":"stripe","uname":"Darwin
        MacBook-Pro-de-Thais.local 22.6.0 Darwin Kernel Version 22.6.0: Wed Jul  5
        22:22:05 PDT 2023; root:xnu-8796.141.3~6/RELEASE_ARM64_T6000 arm64","hostname":"MacBook-Pro-de-Thais.local"}'
      Accept-Encoding:
      - gzip;q=1.0,deflate;q=0.6,identity;q=0.3
      Accept:
      - "*/*"
  response:
    status:
      code: 200
      message: OK
    headers:
      Server:
      - nginx
      Date:
      - Fri, 29 Sep 2023 12:58:52 GMT
      Content-Type:
      - application/json
      Content-Length:
      - '4018'
      Connection:
      - keep-alive
      Access-Control-Allow-Credentials:
      - 'true'
      Access-Control-Allow-Methods:
      - GET,HEAD,PUT,PATCH,POST,DELETE
      Access-Control-Allow-Origin:
      - "*"
      Access-Control-Expose-Headers:
      - Request-Id, Stripe-Manage-Version, X-Stripe-External-Auth-Required, X-Stripe-Privileged-Session-Required
      Access-Control-Max-Age:
      - '300'
      Cache-Control:
      - no-cache, no-store
      Idempotency-Key:
      - 0f32de6b-4b62-4252-b0b3-8bbbe6ca61e0
      Original-Request:
      - req_wf2RuDqNHvLEVO
      Request-Id:
      - req_wf2RuDqNHvLEVO
      Stripe-Should-Retry:
      - 'false'
      Stripe-Version:
      - '2020-08-27'
      Vary:
      - Origin
      X-Stripe-Routing-Context-Priority-Tier:
      - api-testmode
      Strict-Transport-Security:
      - max-age=63072000; includeSubDomains; preload
    body:
      encoding: UTF-8
      string: |-
        {
          "id": "sub_1NvgHPJuOnwQq9QxUy2UL6Nm",
          "object": "subscription",
          "application": null,
          "application_fee_percent": null,
          "automatic_tax": {
            "enabled": false
          },
          "billing_cycle_anchor": 1695992331,
          "billing_thresholds": null,
          "cancel_at": null,
          "cancel_at_period_end": false,
          "canceled_at": null,
          "cancellation_details": {
            "comment": null,
            "feedback": null,
            "reason": null
          },
          "collection_method": "charge_automatically",
          "created": 1695992331,
          "currency": "brl",
          "current_period_end": 1698584331,
          "current_period_start": 1695992331,
          "customer": "cus_Oj8Y29LPO4TzT8",
          "days_until_due": null,
          "default_payment_method": null,
          "default_source": null,
          "default_tax_rates": [],
          "description": null,
          "discount": null,
          "ended_at": null,
          "items": {
            "object": "list",
            "data": [
              {
                "id": "si_Oj8YoCa1WOTBNT",
                "object": "subscription_item",
                "billing_thresholds": null,
                "created": 1695992332,
                "metadata": {},
                "plan": {
                  "id": "price_1NVEIqJuOnwQq9QxBMaE2yul",
                  "object": "plan",
                  "active": true,
                  "aggregate_usage": null,
                  "amount": 300,
                  "amount_decimal": "300",
                  "billing_scheme": "per_unit",
                  "created": 1689688260,
                  "currency": "brl",
                  "interval": "month",
                  "interval_count": 1,
                  "livemode": false,
                  "metadata": {},
                  "nickname": null,
                  "product": "prod_OHnuD1fgH0cvlZ",
                  "tiers_mode": null,
                  "transform_usage": null,
                  "trial_period_days": null,
                  "usage_type": "licensed"
                },
                "price": {
                  "id": "price_1NVEIqJuOnwQq9QxBMaE2yul",
                  "object": "price",
                  "active": true,
                  "billing_scheme": "per_unit",
                  "created": 1689688260,
                  "currency": "brl",
                  "custom_unit_amount": null,
                  "livemode": false,
                  "lookup_key": null,
                  "metadata": {},
                  "nickname": null,
                  "product": "prod_OHnuD1fgH0cvlZ",
                  "recurring": {
                    "aggregate_usage": null,
                    "interval": "month",
                    "interval_count": 1,
                    "trial_period_days": null,
                    "usage_type": "licensed"
                  },
                  "tax_behavior": "unspecified",
                  "tiers_mode": null,
                  "transform_quantity": null,
                  "type": "recurring",
                  "unit_amount": 300,
                  "unit_amount_decimal": "300"
                },
                "quantity": 1,
                "subscription": "sub_1NvgHPJuOnwQq9QxUy2UL6Nm",
                "tax_rates": []
              }
            ],
            "has_more": false,
            "total_count": 1,
            "url": "/v1/subscription_items?subscription=sub_1NvgHPJuOnwQq9QxUy2UL6Nm"
          },
          "latest_invoice": "in_1NvgHPJuOnwQq9QxwjHNGPMw",
          "livemode": false,
          "metadata": {},
          "next_pending_invoice_item_invoice": null,
          "on_behalf_of": null,
          "pause_collection": null,
          "payment_settings": {
            "payment_method_options": null,
            "payment_method_types": null,
            "save_default_payment_method": "off"
          },
          "pending_invoice_item_interval": null,
          "pending_setup_intent": null,
          "pending_update": null,
          "plan": {
            "id": "price_1NVEIqJuOnwQq9QxBMaE2yul",
            "object": "plan",
            "active": true,
            "aggregate_usage": null,
            "amount": 300,
            "amount_decimal": "300",
            "billing_scheme": "per_unit",
            "created": 1689688260,
            "currency": "brl",
            "interval": "month",
            "interval_count": 1,
            "livemode": false,
            "metadata": {},
            "nickname": null,
            "product": "prod_OHnuD1fgH0cvlZ",
            "tiers_mode": null,
            "transform_usage": null,
            "trial_period_days": null,
            "usage_type": "licensed"
          },
          "quantity": 1,
          "schedule": null,
          "start_date": 1695992331,
          "status": "incomplete",
          "test_clock": null,
          "transfer_data": null,
          "trial_end": null,
          "trial_settings": {
            "end_behavior": {
              "missing_payment_method": "create_invoice"
            }
          },
          "trial_start": null
        }
  recorded_at: Fri, 29 Sep 2023 12:58:52 GMT
- request:
    method: get
    uri: https://api.stripe.com/v1/invoices/in_1NvgHPJuOnwQq9QxwjHNGPMw
    body:
      encoding: US-ASCII
      string: ''
    headers:
      User-Agent:
      - Stripe/v1 RubyBindings/7.1.0
      Authorization:
      - Bearer STRIPE_SECRET_KEY
      Content-Type:
      - application/x-www-form-urlencoded
      X-Stripe-Client-Telemetry:
      - '{"last_request_metrics":{"request_id":"req_wf2RuDqNHvLEVO","request_duration_ms":1855}}'
      X-Stripe-Client-User-Agent:
      - '{"bindings_version":"7.1.0","lang":"ruby","lang_version":"3.1.2 p20 (2022-04-12)","platform":"arm64-darwin22","engine":"ruby","publisher":"stripe","uname":"Darwin
        MacBook-Pro-de-Thais.local 22.6.0 Darwin Kernel Version 22.6.0: Wed Jul  5
        22:22:05 PDT 2023; root:xnu-8796.141.3~6/RELEASE_ARM64_T6000 arm64","hostname":"MacBook-Pro-de-Thais.local"}'
      Accept-Encoding:
      - gzip;q=1.0,deflate;q=0.6,identity;q=0.3
      Accept:
      - "*/*"
  response:
    status:
      code: 200
      message: OK
    headers:
      Server:
      - nginx
      Date:
      - Fri, 29 Sep 2023 12:58:53 GMT
      Content-Type:
      - application/json
      Content-Length:
      - '5514'
      Connection:
      - keep-alive
      Access-Control-Allow-Credentials:
      - 'true'
      Access-Control-Allow-Methods:
      - GET,HEAD,PUT,PATCH,POST,DELETE
      Access-Control-Allow-Origin:
      - "*"
      Access-Control-Expose-Headers:
      - Request-Id, Stripe-Manage-Version, X-Stripe-External-Auth-Required, X-Stripe-Privileged-Session-Required
      Access-Control-Max-Age:
      - '300'
      Cache-Control:
      - no-cache, no-store
      Request-Id:
      - req_oY51tmVI0BRC6q
      Stripe-Version:
      - '2020-08-27'
      Vary:
      - Origin
      X-Stripe-Routing-Context-Priority-Tier:
      - api-testmode
      Strict-Transport-Security:
      - max-age=63072000; includeSubDomains; preload
    body:
      encoding: UTF-8
      string: |-
        {
          "id": "in_1NvgHPJuOnwQq9QxwjHNGPMw",
          "object": "invoice",
          "account_country": "BR",
          "account_name": "Ribon",
          "account_tax_ids": null,
          "amount_due": 300,
          "amount_paid": 0,
          "amount_remaining": 300,
          "amount_shipping": 0,
          "application": null,
          "application_fee_amount": null,
          "attempt_count": 1,
          "attempted": true,
          "auto_advance": true,
          "automatic_tax": {
            "enabled": false,
            "status": null
          },
          "billing_reason": "subscription_create",
          "charge": "ch_3NvgHPJuOnwQq9Qx0GDf5v4Z",
          "collection_method": "charge_automatically",
          "created": 1695992331,
          "currency": "brl",
          "custom_fields": null,
          "customer": "cus_Oj8Y29LPO4TzT8",
          "customer_address": {
            "city": "Brasília",
            "country": "BR",
            "line1": null,
            "line2": null,
            "postal_code": null,
            "state": "DF"
          },
          "customer_email": "customer117@customer.com",
          "customer_name": "a customer",
          "customer_phone": null,
          "customer_shipping": null,
          "customer_tax_exempt": "none",
          "customer_tax_ids": [
            {
              "type": "br_cpf",
              "value": "123.456.789-01"
            }
          ],
          "default_payment_method": null,
          "default_source": null,
          "default_tax_rates": [],
          "description": null,
          "discount": null,
          "discounts": [],
          "due_date": null,
          "effective_at": 1695992331,
          "ending_balance": 0,
          "footer": null,
          "from_invoice": null,
          "hosted_invoice_url": "https://invoice.stripe.com/i/acct_1JRgaRJuOnwQq9Qx/test_YWNjdF8xSlJnYVJKdU9ud1FxOVF4LF9PajhZZ0RLRlZKQ0N2N0dVVVlhVmVNOG15YW1pdHp4LDg2NTMzMTMz02003MRnz7fT?s=ap",
          "invoice_pdf": "https://pay.stripe.com/invoice/acct_1JRgaRJuOnwQq9Qx/test_YWNjdF8xSlJnYVJKdU9ud1FxOVF4LF9PajhZZ0RLRlZKQ0N2N0dVVVlhVmVNOG15YW1pdHp4LDg2NTMzMTMz02003MRnz7fT/pdf?s=ap",
          "last_finalization_error": null,
          "latest_revision": null,
          "lines": {
            "object": "list",
            "data": [
              {
                "id": "il_1NvgHPJuOnwQq9Qxm5Cj6SPF",
                "object": "line_item",
                "amount": 300,
                "amount_excluding_tax": 300,
                "currency": "brl",
                "description": "1 × subscription test (at R$ 3.00 / month)",
                "discount_amounts": [],
                "discountable": true,
                "discounts": [],
                "livemode": false,
                "metadata": {},
                "period": {
                  "end": 1698584331,
                  "start": 1695992331
                },
                "plan": {
                  "id": "price_1NVEIqJuOnwQq9QxBMaE2yul",
                  "object": "plan",
                  "active": true,
                  "aggregate_usage": null,
                  "amount": 300,
                  "amount_decimal": "300",
                  "billing_scheme": "per_unit",
                  "created": 1689688260,
                  "currency": "brl",
                  "interval": "month",
                  "interval_count": 1,
                  "livemode": false,
                  "metadata": {},
                  "nickname": null,
                  "product": "prod_OHnuD1fgH0cvlZ",
                  "tiers_mode": null,
                  "transform_usage": null,
                  "trial_period_days": null,
                  "usage_type": "licensed"
                },
                "price": {
                  "id": "price_1NVEIqJuOnwQq9QxBMaE2yul",
                  "object": "price",
                  "active": true,
                  "billing_scheme": "per_unit",
                  "created": 1689688260,
                  "currency": "brl",
                  "custom_unit_amount": null,
                  "livemode": false,
                  "lookup_key": null,
                  "metadata": {},
                  "nickname": null,
                  "product": "prod_OHnuD1fgH0cvlZ",
                  "recurring": {
                    "aggregate_usage": null,
                    "interval": "month",
                    "interval_count": 1,
                    "trial_period_days": null,
                    "usage_type": "licensed"
                  },
                  "tax_behavior": "unspecified",
                  "tiers_mode": null,
                  "transform_quantity": null,
                  "type": "recurring",
                  "unit_amount": 300,
                  "unit_amount_decimal": "300"
                },
                "proration": false,
                "proration_details": {
                  "credited_items": null
                },
                "quantity": 1,
                "subscription": "sub_1NvgHPJuOnwQq9QxUy2UL6Nm",
                "subscription_item": "si_Oj8YoCa1WOTBNT",
                "tax_amounts": [],
                "tax_rates": [],
                "type": "subscription",
                "unit_amount_excluding_tax": "300"
              }
            ],
            "has_more": false,
            "total_count": 1,
            "url": "/v1/invoices/in_1NvgHPJuOnwQq9QxwjHNGPMw/lines"
          },
          "livemode": false,
          "metadata": {},
          "next_payment_attempt": null,
          "number": "A47AE660-0001",
          "on_behalf_of": null,
          "paid": false,
          "paid_out_of_band": false,
          "payment_intent": "pi_3NvgHPJuOnwQq9Qx0CxpDqfQ",
          "payment_settings": {
            "default_mandate": null,
            "payment_method_options": null,
            "payment_method_types": null
          },
          "period_end": 1695992331,
          "period_start": 1695992331,
          "post_payment_credit_notes_amount": 0,
          "pre_payment_credit_notes_amount": 0,
          "quote": null,
          "receipt_number": null,
          "rendering": null,
          "rendering_options": null,
          "shipping_cost": null,
          "shipping_details": null,
          "starting_balance": 0,
          "statement_descriptor": null,
          "status": "open",
          "status_transitions": {
            "finalized_at": 1695992331,
            "marked_uncollectible_at": null,
            "paid_at": null,
            "voided_at": null
          },
          "subscription": "sub_1NvgHPJuOnwQq9QxUy2UL6Nm",
          "subscription_details": {
            "metadata": {}
          },
          "subtotal": 300,
          "subtotal_excluding_tax": 300,
          "tax": null,
          "test_clock": null,
          "total": 300,
          "total_discount_amounts": [],
          "total_excluding_tax": 300,
          "total_tax_amounts": [],
          "transfer_data": null,
          "webhooks_delivered_at": 1695992331
        }
  recorded_at: Fri, 29 Sep 2023 12:58:53 GMT
- request:
    method: get
    uri: https://api.stripe.com/v1/payment_intents/pi_3NvgHPJuOnwQq9Qx0CxpDqfQ
    body:
      encoding: US-ASCII
      string: ''
    headers:
      User-Agent:
      - Stripe/v1 RubyBindings/7.1.0
      Authorization:
      - Bearer STRIPE_SECRET_KEY
      Content-Type:
      - application/x-www-form-urlencoded
      X-Stripe-Client-Telemetry:
      - '{"last_request_metrics":{"request_id":"req_oY51tmVI0BRC6q","request_duration_ms":357}}'
      X-Stripe-Client-User-Agent:
      - '{"bindings_version":"7.1.0","lang":"ruby","lang_version":"3.1.2 p20 (2022-04-12)","platform":"arm64-darwin22","engine":"ruby","publisher":"stripe","uname":"Darwin
        MacBook-Pro-de-Thais.local 22.6.0 Darwin Kernel Version 22.6.0: Wed Jul  5
        22:22:05 PDT 2023; root:xnu-8796.141.3~6/RELEASE_ARM64_T6000 arm64","hostname":"MacBook-Pro-de-Thais.local"}'
      Accept-Encoding:
      - gzip;q=1.0,deflate;q=0.6,identity;q=0.3
      Accept:
      - "*/*"
  response:
    status:
      code: 200
      message: OK
    headers:
      Server:
      - nginx
      Date:
      - Fri, 29 Sep 2023 12:58:53 GMT
      Content-Type:
      - application/json
      Content-Length:
      - '6482'
      Connection:
      - keep-alive
      Access-Control-Allow-Credentials:
      - 'true'
      Access-Control-Allow-Methods:
      - GET,HEAD,PUT,PATCH,POST,DELETE
      Access-Control-Allow-Origin:
      - "*"
      Access-Control-Expose-Headers:
      - Request-Id, Stripe-Manage-Version, X-Stripe-External-Auth-Required, X-Stripe-Privileged-Session-Required
      Access-Control-Max-Age:
      - '300'
      Cache-Control:
      - no-cache, no-store
      Request-Id:
      - req_VliOIxIqNyWvDQ
      Stripe-Version:
      - '2020-08-27'
      Vary:
      - Origin
      X-Stripe-Routing-Context-Priority-Tier:
      - api-testmode
      Strict-Transport-Security:
      - max-age=63072000; includeSubDomains; preload
    body:
      encoding: UTF-8
      string: |-
        {
          "id": "pi_3NvgHPJuOnwQq9Qx0CxpDqfQ",
          "object": "payment_intent",
          "amount": 300,
          "amount_capturable": 0,
          "amount_details": {
            "tip": {}
          },
          "amount_received": 0,
          "application": null,
          "application_fee_amount": null,
          "automatic_payment_methods": null,
          "canceled_at": null,
          "cancellation_reason": null,
          "capture_method": "automatic",
          "charges": {
            "object": "list",
            "data": [
              {
                "id": "ch_3NvgHPJuOnwQq9Qx0GDf5v4Z",
                "object": "charge",
                "amount": 300,
                "amount_captured": 0,
                "amount_refunded": 0,
                "application": null,
                "application_fee": null,
                "application_fee_amount": null,
                "balance_transaction": null,
                "billing_details": {
                  "address": {
                    "city": null,
                    "country": null,
                    "line1": null,
                    "line2": null,
                    "postal_code": null,
                    "state": null
                  },
                  "email": null,
                  "name": null,
                  "phone": null
                },
                "calculated_statement_descriptor": null,
                "captured": false,
                "created": 1695992332,
                "currency": "brl",
                "customer": "cus_Oj8Y29LPO4TzT8",
                "description": "Subscription creation",
                "destination": null,
                "dispute": null,
                "disputed": false,
                "failure_balance_transaction": null,
                "failure_code": "card_declined",
                "failure_message": "Your card was declined.",
                "fraud_details": {
                  "stripe_report": "fraudulent"
                },
                "invoice": "in_1NvgHPJuOnwQq9QxwjHNGPMw",
                "livemode": false,
                "metadata": {},
                "on_behalf_of": null,
                "order": null,
                "outcome": {
                  "network_status": "not_sent_to_network",
                  "reason": "merchant_blacklist",
                  "risk_level": "highest",
                  "risk_score": 97,
                  "seller_message": "Stripe blocked this payment.",
                  "type": "blocked"
                },
                "paid": false,
                "payment_intent": "pi_3NvgHPJuOnwQq9Qx0CxpDqfQ",
                "payment_method": "pm_1NvgHHJuOnwQq9QxUdnVrulB",
                "payment_method_details": {
                  "card": {
                    "amount_authorized": null,
                    "brand": "visa",
                    "checks": {
                      "address_line1_check": null,
                      "address_postal_code_check": null,
                      "cvc_check": "unavailable"
                    },
                    "country": "US",
                    "exp_month": 12,
                    "exp_year": 2024,
                    "extended_authorization": {
                      "status": "disabled"
                    },
                    "fingerprint": "kVIu3rHKofLj64wR",
                    "funding": "credit",
                    "incremental_authorization": {
                      "status": "unavailable"
                    },
                    "installments": null,
                    "last4": "0019",
                    "mandate": null,
                    "multicapture": {
                      "status": "unavailable"
                    },
                    "network": "visa",
                    "network_token": {
                      "used": false
                    },
                    "overcapture": {
                      "maximum_amount_capturable": 300,
                      "status": "unavailable"
                    },
                    "three_d_secure": null,
                    "wallet": null
                  },
                  "type": "card"
                },
                "receipt_email": null,
                "receipt_number": null,
                "receipt_url": null,
                "refunded": false,
                "refunds": {
                  "object": "list",
                  "data": [],
                  "has_more": false,
                  "total_count": 0,
                  "url": "/v1/charges/ch_3NvgHPJuOnwQq9Qx0GDf5v4Z/refunds"
                },
                "review": null,
                "shipping": null,
                "source": null,
                "source_transfer": null,
                "statement_descriptor": null,
                "statement_descriptor_suffix": null,
                "status": "failed",
                "transfer_data": null,
                "transfer_group": null
              }
            ],
            "has_more": false,
            "total_count": 1,
            "url": "/v1/charges?payment_intent=pi_3NvgHPJuOnwQq9Qx0CxpDqfQ"
          },
          "client_secret": "pi_3NvgHPJuOnwQq9Qx0CxpDqfQ_secret_pQWFQX8510OXJSpKLgANd381l",
          "confirmation_method": "automatic",
          "created": 1695992331,
          "currency": "brl",
          "customer": "cus_Oj8Y29LPO4TzT8",
          "description": "Subscription creation",
          "invoice": "in_1NvgHPJuOnwQq9QxwjHNGPMw",
          "last_payment_error": {
            "charge": "ch_3NvgHPJuOnwQq9Qx0GDf5v4Z",
            "code": "card_declined",
            "decline_code": "fraudulent",
            "doc_url": "https://stripe.com/docs/error-codes/card-declined",
            "message": "Your card was declined.",
            "payment_method": {
              "id": "pm_1NvgHHJuOnwQq9QxUdnVrulB",
              "object": "payment_method",
              "billing_details": {
                "address": {
                  "city": null,
                  "country": null,
                  "line1": null,
                  "line2": null,
                  "postal_code": null,
                  "state": null
                },
                "email": null,
                "name": null,
                "phone": null
              },
              "card": {
                "brand": "visa",
                "checks": {
                  "address_line1_check": null,
                  "address_postal_code_check": null,
                  "cvc_check": "pass"
                },
                "country": "US",
                "exp_month": 12,
                "exp_year": 2024,
                "fingerprint": "kVIu3rHKofLj64wR",
                "funding": "credit",
                "generated_from": null,
                "last4": "0019",
                "networks": {
                  "available": [
                    "visa"
                  ],
                  "preferred": null
                },
                "three_d_secure_usage": {
                  "supported": true
                },
                "wallet": null
              },
              "created": 1695992324,
              "customer": "cus_Oj8Y29LPO4TzT8",
              "livemode": false,
              "metadata": {},
              "type": "card"
            },
            "type": "card_error"
          },
          "latest_charge": "ch_3NvgHPJuOnwQq9Qx0GDf5v4Z",
          "livemode": false,
          "metadata": {},
          "next_action": null,
          "on_behalf_of": null,
          "payment_method": null,
          "payment_method_configuration_details": null,
          "payment_method_options": {
            "card": {
              "installments": null,
              "mandate_options": null,
              "network": null,
              "request_three_d_secure": "automatic"
            }
          },
          "payment_method_types": [
            "card"
          ],
          "processing": null,
          "receipt_email": null,
          "review": null,
          "setup_future_usage": "off_session",
          "shipping": null,
          "source": null,
          "statement_descriptor": null,
          "statement_descriptor_suffix": null,
          "status": "requires_payment_method",
          "transfer_data": null,
          "transfer_group": null
        }
  recorded_at: Fri, 29 Sep 2023 12:58:53 GMT
- request:
    method: get
    uri: https://api.stripe.com/v1/charges/ch_3NvgHPJuOnwQq9Qx0GDf5v4Z
    body:
      encoding: US-ASCII
      string: ''
    headers:
      User-Agent:
      - Stripe/v1 RubyBindings/7.1.0
      Authorization:
      - Bearer STRIPE_SECRET_KEY
      Content-Type:
      - application/x-www-form-urlencoded
      X-Stripe-Client-Telemetry:
      - '{"last_request_metrics":{"request_id":"req_VliOIxIqNyWvDQ","request_duration_ms":416}}'
      X-Stripe-Client-User-Agent:
      - '{"bindings_version":"7.1.0","lang":"ruby","lang_version":"3.1.2 p20 (2022-04-12)","platform":"arm64-darwin22","engine":"ruby","publisher":"stripe","uname":"Darwin
        MacBook-Pro-de-Thais.local 22.6.0 Darwin Kernel Version 22.6.0: Wed Jul  5
        22:22:05 PDT 2023; root:xnu-8796.141.3~6/RELEASE_ARM64_T6000 arm64","hostname":"MacBook-Pro-de-Thais.local"}'
      Accept-Encoding:
      - gzip;q=1.0,deflate;q=0.6,identity;q=0.3
      Accept:
      - "*/*"
  response:
    status:
      code: 200
      message: OK
    headers:
      Server:
      - nginx
      Date:
      - Fri, 29 Sep 2023 12:58:53 GMT
      Content-Type:
      - application/json
      Content-Length:
      - '2810'
      Connection:
      - keep-alive
      Access-Control-Allow-Credentials:
      - 'true'
      Access-Control-Allow-Methods:
      - GET,HEAD,PUT,PATCH,POST,DELETE
      Access-Control-Allow-Origin:
      - "*"
      Access-Control-Expose-Headers:
      - Request-Id, Stripe-Manage-Version, X-Stripe-External-Auth-Required, X-Stripe-Privileged-Session-Required
      Access-Control-Max-Age:
      - '300'
      Cache-Control:
      - no-cache, no-store
      Request-Id:
      - req_DEJkVp0REoTS4i
      Stripe-Version:
      - '2020-08-27'
      Vary:
      - Origin
      X-Stripe-Routing-Context-Priority-Tier:
      - api-testmode
      Strict-Transport-Security:
      - max-age=63072000; includeSubDomains; preload
    body:
      encoding: UTF-8
      string: |-
        {
          "id": "ch_3NvgHPJuOnwQq9Qx0GDf5v4Z",
          "object": "charge",
          "amount": 300,
          "amount_captured": 0,
          "amount_refunded": 0,
          "application": null,
          "application_fee": null,
          "application_fee_amount": null,
          "balance_transaction": null,
          "billing_details": {
            "address": {
              "city": null,
              "country": null,
              "line1": null,
              "line2": null,
              "postal_code": null,
              "state": null
            },
            "email": null,
            "name": null,
            "phone": null
          },
          "calculated_statement_descriptor": null,
          "captured": false,
          "created": 1695992332,
          "currency": "brl",
          "customer": "cus_Oj8Y29LPO4TzT8",
          "description": "Subscription creation",
          "destination": null,
          "dispute": null,
          "disputed": false,
          "failure_balance_transaction": null,
          "failure_code": "card_declined",
          "failure_message": "Your card was declined.",
          "fraud_details": {
            "stripe_report": "fraudulent"
          },
          "invoice": "in_1NvgHPJuOnwQq9QxwjHNGPMw",
          "livemode": false,
          "metadata": {},
          "on_behalf_of": null,
          "order": null,
          "outcome": {
            "network_status": "not_sent_to_network",
            "reason": "merchant_blacklist",
            "risk_level": "highest",
            "risk_score": 97,
            "seller_message": "Stripe blocked this payment.",
            "type": "blocked"
          },
          "paid": false,
          "payment_intent": "pi_3NvgHPJuOnwQq9Qx0CxpDqfQ",
          "payment_method": "pm_1NvgHHJuOnwQq9QxUdnVrulB",
          "payment_method_details": {
            "card": {
              "amount_authorized": null,
              "brand": "visa",
              "checks": {
                "address_line1_check": null,
                "address_postal_code_check": null,
                "cvc_check": "unavailable"
              },
              "country": "US",
              "exp_month": 12,
              "exp_year": 2024,
              "extended_authorization": {
                "status": "disabled"
              },
              "fingerprint": "kVIu3rHKofLj64wR",
              "funding": "credit",
              "incremental_authorization": {
                "status": "unavailable"
              },
              "installments": null,
              "last4": "0019",
              "mandate": null,
              "multicapture": {
                "status": "unavailable"
              },
              "network": "visa",
              "network_token": {
                "used": false
              },
              "overcapture": {
                "maximum_amount_capturable": 300,
                "status": "unavailable"
              },
              "three_d_secure": null,
              "wallet": null
            },
            "type": "card"
          },
          "receipt_email": null,
          "receipt_number": null,
          "receipt_url": null,
          "refunded": false,
          "refunds": {
            "object": "list",
            "data": [],
            "has_more": false,
            "total_count": 0,
            "url": "/v1/charges/ch_3NvgHPJuOnwQq9Qx0GDf5v4Z/refunds"
          },
          "review": null,
          "shipping": null,
          "source": null,
          "source_transfer": null,
          "statement_descriptor": null,
          "statement_descriptor_suffix": null,
          "status": "failed",
          "transfer_data": null,
          "transfer_group": null
        }
  recorded_at: Fri, 29 Sep 2023 12:58:53 GMT
recorded_with: VCR 6.1.0
